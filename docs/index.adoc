= NWT-Projekt
ifndef::dir[:imagesdir: images]

== Network Structure

image:NetworkStructure.png[]

== Erstellen des Routers

Create CT (da dieser leichtgewichtiger ist) +
Template: ubuntu +
System Dimensionierung festlegen

Netzwerk einrichten:
- CT auswählen
- Network Tab
- add Network Device

image:NetworkSettingsRouter.png[]

In den Container einloggen, eventuell SSH installieren

==== Gluenet initialisieren:

```bash
sudo apt-get update
sudo apt upgrade
cd /etc

nano sysctl . conf
```

Now add this statement into the file:

```bash
net.ipv4.ip_forward = 1
```

Assuming your public interface is eth1 and local interface is eth0

2- Set natting the natting rule with:
```bash
iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE
```
3- Accept traffic from eth0:
```bash
iptables -A INPUT -i eth0 -j ACCEPT
```
4- Allow established connections from the public interface.
```bash
iptables -A INPUT -i eth1 -m state --state ESTABLISHED,RELATED -j ACCEPT
```
5- Allow outgoing connections:
```bash
iptables -A OUTPUT -j ACCEPT
```

==== Remote Desktop

===== Login
- User: client
- Password: PuRu123

install xrdp server:
```bash
sudo apt install xrdp
sudo systemctl enable xrdp
```
```bash
sudo nano /etc/xrdp/startwm.sh
```
and then add
```bash
lxsession -s Lubuntu -e LXDE
```
Finally restart xprdp:
```bash
sudo /etc/init.d/xrdp restart
```

Now you just have to create a userpassword
```bash
sudo passwd client
```


== Erstellen des Desktop-Clients
Create VM +
Image: Lubuntu-Template ISO (lubuntu-22.10-desktop-amd64.iso) +
System dimensionierung festlegen.

Die VM zum Internet verbinden:

- go ot your VM
- Hardware Tab
- add Network Device or edit one and choose the right vmbridge

Then on the Desktop search for Settings.
Next go to Advanced Networkconfiguartion and set it to manual +
Add: IP, Mask, Gateway

XRDP einrichten:
[source, bash]
----
sudo apt-get update
sudo apt upgrade
sudo apt-get install xrdp
----

== Erstellen des DNS-AdBlockers
* ``Create CT`` klicken
* Konfigurieren
** Node -> pve01
** CT_ID -> 7141
** Hostname -> dns-adblock
** Resource Pool -> it200308
** Password -> <ausgewählt>
** SSH public key -> <geuploaded>
** Netzwerk ->
*** IP -> 10.9.7.19/28
*** Gateway -> 10.9.7.17
* Einloggen per root login
* Erstellen eines neuen users
** User: MaMi
** ``sudo adduser <username>``


## Erstellen des Webserver

@Manuel Puchner

- `Create CT` klicken
- Konfigurieren
- Node: pve01
- CT ID: 7143
- Hostname: webserver
- Resource Pool: it200308
- Password: <ausgewählt>
- Netzwerk:
- Bridge: vmbr7
- IP: 10.9.7.18/28
- Gateway: 10.9.7.17
- Einloggen per root login
- Erstellen eines neuen users
- Username: me
- `sudo adduser me`
- installieren von nginx
- Installation: `sudo apt install nginx`
- Status überprüfen: `sudo systemctl status nginx`
- Nginx starten: `sudo systemctl start nginx`
- Nginx neustarten: `sudo systemctl restart nginx`
- Website dann erreichbar unter [http://10.9.7.18:80](http://10.9.7.18/)

## Erstellen des Proxy-Servers

[How To Set Up & Install Squid Proxy Server on Ubuntu 18.04](https://phoenixnap.com/kb/setup-install-squid-proxy-server-ubuntu)

@Manuel Puchner

- `Create CT` klicken
- Konfigurieren
- Node: pve01
- CT ID: 7144
- Hostname: proxy
- Resource Pool: it200308
- Password: <ausgewählt>
- Netzwerk:
- Bridge: vmbr7
- IP: 10.9.7.21/28
- Gateway: 10.9.7.17
- Einloggen per root login
- Erstellen eines neuen users
- Username: me
- `sudo adduser me`
- Updaten
- `sudo apt update`
- `sudo apt upgrade`
- Squid installieren
- `sudo apt install squid`
- Squid configurieren (`/etc/squid/squid.conf`)
```bash
http_access allow all
cache_dir ufs /var/spool/squid 100 16 256
```
- Squid neustarten
- `systemctl restart squid`

### Proxy Connetction Settings
image:ProxySettings.png[]

== FCAPS

* Fault Management
** Überwachung des gesamten Systems auf mögliche Störungen oder Ausfälle.
** Fehlererkennung/Ursprung des Fehlers erkennen
** Fehlerisolation und Fehlerbehebung

* Configuration Management
** Konfiguration der Komponenten entsprechend den Anforderungen.
** Tägliche Backups von den Daten
** Monatliche Backups von den Configurations Dateien

* Accounting Management
    
** Netzwerkressourcennutzung und aktivitäten erfassen um ein effizientes System zu gewährleisten
** Protokollierung von Ereignissen, um eine nachträgliche Analyse und Überprüfung zu ermöglichen.
** Überwachung des Datenverkehrs, der Bandbreitennutzung und der Netzwerkleistung.
** Analyse des Netzwerktraffics um die Effizient zu verbessern

* Performance Management
** Überwachung und Optimierung der Leistung der Netzwerkkomponenten.
** Netzwerklatenz, Bandbreite, Auslastung und Paketverlust beobachten.
** Uptime Robot Webserver
*** Gibt Latenz, Ping, Uptime an.

* Security Management
    Implementierung von Maßnahmen zur Gewährleistung der Datensicherheit und Datenschutz.
** Firewall einrichten, um das Netzwerk vor unbefugtem Zugriff und Bedrohungen zu schützen.
** Monitoring Software einsetzen wie Nagios, ZABBIX, CHeckMK, ... einsetzen
** Für die Überwachung der Netzwerksicherheit, Erkennung von Sicherheitsvorfällen und Durchführung von Sicherheitsaudits.
